"""
?????????? ????????? ?????? - ?????????? ?? ?????? 25/75
"""

from typing import NamedTuple


class Layout:
    """????? ??? ?????????? ????????? ??????"""

    class Panes(NamedTuple):
        """??????? ???????"""
        tree_width: int
        editor_width: int
        separator_x: int
        height: int

    def __init__(self, terminal_width: int, terminal_height: int):
        """
        ????????????? ????????

        Args:
            terminal_width: ?????? ?????????
            terminal_height: ?????? ?????????
        """
        self.terminal_width = terminal_width
        self.terminal_height = terminal_height
        self._calculate_panes()

    def _calculate_panes(self) -> None:
        """????????? ??????? ??????? (25% - ?????? ??????, 75% - ????????)"""
        # ?????? ?????? - 25% ?? ??????
        self.tree_width = int(self.terminal_width * 0.25)
        # ???????? - ????????? ????? (????? 1 ?????? ??? ???????????)
        self.editor_width = self.terminal_width - self.tree_width - 1
        # ??????? ???????????
        self.separator_x = self.tree_width
        # ?????? (?????????? ??? ????? ???????)
        self.height = self.terminal_height

    def update_size(self, width: int, height: int) -> None:
        """
        ???????? ??????? ????????? ? ??????????? ??????

        Args:
            width: ????? ?????? ?????????
            height: ????? ?????? ?????????
        """
        self.terminal_width = width
        self.terminal_height = height
        self._calculate_panes()

    def get_panes(self) -> Panes:
        """
        ???????? ??????? ???????

        Returns:
            NamedTuple ? ????????? ???????
        """
        return self.Panes(
            tree_width=self.tree_width,
            editor_width=self.editor_width,
            separator_x=self.separator_x,
            height=self.height,
        )

    def get_tree_bounds(self) -> tuple[int, int, int, int]:
        """
        ???????? ??????? ?????? ?????? ?????? (x, y, width, height)

        Returns:
            (x, y, width, height)
        """
        return (0, 0, self.tree_width, self.height)

    def get_editor_bounds(self) -> tuple[int, int, int, int]:
        """
        ???????? ??????? ?????? ????????? (x, y, width, height)

        Returns:
            (x, y, width, height)
        """
        return (self.separator_x + 1, 0, self.editor_width, self.height)
