# sEditor

Современный терминальный редактор с интеграцией AI, построенный на Tauri и Rust.

## Описание

sEditor — это терминальный редактор нового поколения, который объединяет традиционный интерфейс командной строки с возможностями современных IDE и интеграцией с языковыми моделями через Ollama.

### Основные возможности

- **Терминал**: Полнофункциональный терминал с поддержкой навигации по файловой системе
- **IDE режим**: Просмотр и редактирование файлов с деревом проекта
- **AI интеграция**: Взаимодействие с Ollama для помощи в разработке
- **Гибкие настройки**: Настройка темы, шрифтов и параметров AI

## Архитектура проекта

### Структура исходников

```
src/                         # Frontend исходники
├── index.html               # Главная HTML страница
├── main.js                  # Основная логика приложения
└── styles.css               # Стили приложения

src-tauri/                   # Rust backend
├── src/
│   ├── main.rs              # Точка входа приложения
│   ├── error.rs             # Единая система обработки ошибок
│   ├── api/                 # Tauri commands (тонкий слой API)
│   │   ├── mod.rs
│   │   ├── settings.rs      # Команды для работы с настройками
│   │   ├── terminal.rs      # Команды терминала и работы с файлами
│   │   └── chat.rs          # Команды для взаимодействия с Ollama
│   └── core/                # Бизнес-логика приложения
│       ├── mod.rs
│       ├── state.rs         # Типы данных и состояние приложения
│       ├── settings.rs      # Загрузка и сохранение настроек
│       ├── terminal.rs      # Выполнение команд и навигация
│       ├── filesystem.rs    # Работа с файловой системой
│       └── chat.rs          # Интеграция с Ollama
├── Cargo.toml               # Зависимости и метаданные проекта
├── build.rs                 # Скрипт сборки Tauri
└── tauri.conf.json          # Конфигурация Tauri

dist/                        # Собранный frontend (генерируется автоматически)
package.json                 # Frontend зависимости и скрипты
vite.config.js               # Конфигурация Vite
.gitignore                   # Игнорируемые файлы (node_modules, dist, target)
```

### Принципы архитектуры

1. **Разделение ответственности**: API слой (`api/`) отделён от бизнес-логики (`core/`)
2. **Единая обработка ошибок**: Все ошибки обрабатываются через `AppError` с использованием `thiserror`
3. **Модульность**: Каждый модуль отвечает за конкретную функциональность
4. **Типобезопасность**: Использование строгой типизации Rust для предотвращения ошибок

## Технологии

### Backend (Rust)
- **Tauri 1.5**: Фреймворк для создания десктопных приложений
- **tokio**: Асинхронная среда выполнения
- **reqwest**: HTTP клиент для взаимодействия с Ollama
- **serde**: Сериализация/десериализация данных
- **thiserror**: Удобная обработка ошибок
- **parking_lot**: Эффективные примитивы синхронизации

### Frontend
- **Vite 5**: Быстрая система сборки с hot-reload
- **Vanilla JavaScript**: Без фреймворков для простоты
- **HTML5/CSS3**: Современные веб-стандарты
- **@tauri-apps/api**: Интеграция с Tauri

## Установка и запуск

### Требования

- Rust 1.70+
- Node.js 18+ и npm
- Ollama (для AI функций)

### Установка зависимостей

```bash
# Установить frontend зависимости
npm install
```

### Разработка

```bash
# Запустить в режиме разработки (с hot-reload)
npm run tauri:dev
```

Vite автоматически запустит dev-сервер на `http://localhost:1420`, а Tauri откроет приложение.

### Сборка

```bash
# Собрать production версию
npm run tauri:build
```

Это соберёт frontend (Vite) и backend (Rust), создав готовое приложение в `src-tauri/target/release/`.

## Конфигурация

Настройки приложения хранятся в JSON файле:
- **macOS**: `~/Library/Application Support/com.seditor.app/settings.json`
- **Linux**: `~/.config/seditor/settings.json`
- **Windows**: `%APPDATA%\seditor\settings.json`

### Пример настроек

```json
{
  "theme_id": "graphite",
  "font_family": "IBM Plex Mono",
  "font_size": 15,
  "mode": "terminal",
  "ollama": {
    "model": "llama3",
    "temperature": 0.4
  }
}
```

## Режимы работы

- **Terminal**: Классический терминальный режим
- **IDE**: Режим редактора с деревом файлов
- **Chat**: Режим чата с AI
- **Agent**: AI-ассистент для разработки

## Разработка

### Добавление новой команды

1. Создайте функцию в соответствующем модуле `core/`
2. Добавьте Tauri command в соответствующий модуль `api/`
3. Зарегистрируйте команду в `main.rs` через `invoke_handler`

### Обработка ошибок

Используйте `AppError` для всех ошибок:

```rust
use crate::error::{AppError, AppResult};

pub fn my_function() -> AppResult<String> {
    // Ваш код
    Ok("Success".to_string())
}
```

## Лицензия

MIT

## Авторы

sEditor Team

